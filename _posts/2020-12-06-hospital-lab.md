---
layout: post
title: Hospital Lab
subtitle: Blog Post 6
---
## Hospital Lab
#### Mazyar Azmi
#### 12-06-20

1. New York County has the most beds per person, at 7.14261 beds per 1000 people.
2. First, I started with the query() method from weather.py, except this time, because the raw data from the api was returning lines of csv, I used response.text to return the raw text.  Normally this would be a json object, but not here.  Also, the goal was to obtain a csv file that contained the dataset, so it is much easier to not have to translate it multiple times when you're already given the type of data that you need.  Next, I cleaned the data by first standardizing the bed count method to 1000HAB.  This means that if the counting method is 500HAB for a given line of data, then the actual 'beds' value would be multiplied by 2 to get the 1000HAB value.  If the counting method is 2000HAB, the beds value would then be divided by 2.  Next, I made sure that  the 'beds' values were all floats, and the 'population' values were all ints.  Then, as a final check, I made the code print out any erroneous datapoints or typos if there were any, and the fact that nothing prints out proves that there were none.
3. The goal of this lab was to determine the county with the most hospital beds per person.  However, before I could get to the actual lab portion of the code, I first had to generate the csv file from the provided api.  This wasn't too complicated, as it wasn't very different from weather.py, so I basically used my old code.  The query method here is different from the query method in weather.py because of two reasons: first, the payload takes key and id instead of key and q.  I learned this from the hospital api documentation.  Next, the data received from the api actually comes as lines of csv, so all I had to do was return the raw text instead of a java object.  I figured this out by looking at the error codes from when I was trying to use response.json, so I read the documentation for requests and found .text to be the necessary method here.  Next, I made a csv file called hospital.csv that contained all of the lines of code except for the initial label line.  This made the whole process easier, as the alternative would have been retrieving all of the data from the csv every time I ran the code.  Then, I used the with method to read the csv file, and the first thing I did was make a cleaning loop.  I standardized all of the measuring methods, as well as converted the bed values to match those methods.  Then I converted the number values to floats or ints so that I wouldn't run into any other problems down the line.  Next, I made sure there weren't any errors or typos in the data that I overlooked using a bunch of checks that would print the faulty line if there was anything wrong.  By that point, I was able to check country, state, type, measure, beds, population, and year, but it is impossible to check county.  However, I had an idea that involved checking the population values for each row in a given county, to make sure there weren't any county or population typos, but I incorporated that later.  The next step at this point was to begin answering the lab question.  My first idea to tackle the problem was using a stack that would work kind of like the postfix calculator, except instead of storing ints, it would store the whole row of data, and instead of just adding two numbers, anywhere from one to four numbers per county could be added.  I couldn't really figure it out, so I tried a different method.  Using concepts we learned for the iris lab, I created a dictionary called counties, and for each new county in the data, a new dictionary within counties would be created.  Then, for each county dictionary, all 'beds' and 'population' values are placed into their respective lists.  I originally tried some different combinations of lists and dictionaries, but overall all of these methods I tried at the end were very similar.  Also, at some point when writing the code, I think I forgot what the lab quesiton was, so I accidentally found the highest average beds per county, instead of the highest sum.  On line 77, you can see the code that checks to make sure that the population value for all the rows for each county are the same.  I ended up not including this in the final code because I already saw that it doesn't print anything, and there are no errors in the population values in the data.  Then, I checked with Jacob, Lucca, and Ethan to make sure my final answer was correct.  I actually originally gave them my max average, but they all helped me correct my error.